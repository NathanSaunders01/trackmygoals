<div class="container">
  <h1 class="text-center">Goal Sheet</h1>
  <hr>
  </br>
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <% if current_user.goals.count > 0 %>
        <table class="table">
          <thead>
            <th><strong>Goal</strong></th>
            <th class="text-center"><strong>XP</strong></th>
            <th class="text-center"><strong>Total XP</strong></th>
            <th class="text-center"><strong>XP Today</strong></th>
            <th class="text-center"><strong>Streak</strong></th>
            <th class="text-right"><strong>Actions</strong></th>
          </thead>
        </table>
          <div class="tbl-content">
            <table>
              <tbody>
                <% @user_goals.each do |goal| %>
                  <tr class="<%= if goal.warn_streak_loss then "bg-danger" end %>">
                    <td class="left-col"><%= link_to goal.name, goal_path(goal) %></td>
                    <td class="text-center"><%= goal.xp_value %></td>
                    <td class="text-center"><%= goal.total_goal_xp %></td>
                    <td class="text-center"><%= goal.daily_goal_xp %></td>
                    <td class="text-center">
                      <% if goal.calculate_length_of_streak >= 5 && !goal.warn_streak_loss %>
                        <span class="fa-stack fa-2x">
                          <i class="fa fa-star-o fa-stack-2x"></i>
                          <small class="star-text"><%= goal.calculate_length_of_streak.to_i %></small>
                        </span>
                      <% elsif goal.warn_streak_loss %>
                        <span class="fa-stack fa-2x">
                          <i class="fa fa-exclamation fa-stack-2x"></i>
                        </span>
                      <% else %>
                        <%= progress_bar goal.calculate_length_of_streak/5 %>
                      <% end %>
                    </td>
                    <td class="text-right right-col">
                      <%= link_to edit_goal_path(goal), class:"btn btn-xs btn-default" do %>
                        <i class="fa fa-edit"></i>
                      <% end %>
                      <%= link_to goal_path(goal), method: :delete, data: 
                        {confirm: "Are you sure you want to delete this goal?\n
                        You will lose all data relating to this goal."}, 
                        class: "btn btn-xs btn-danger" do %>
                         <i class="fa fa-trash"></i>
                      <% end %>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </table>
        <%= link_to "Create new goal", new_goal_path, class:"btn btn-primary btn-md" %>
      <% else %>
        <h4 class="text-center">You have no goals yet!</h4>
        </br>
        <div class="text-center">
          <%= link_to "Create new goal", new_goal_path, class: "btn btn-primary btn-lg" %>
        </div>
      <% end %>
    </div>
  </div>
</div>