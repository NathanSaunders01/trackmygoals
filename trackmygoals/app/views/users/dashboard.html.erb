<div class="container">
  <h1 class="text-center">Dashboard</h1>
  <hr>
  <div class="row">
    <div class="col-md-2">
      <h4 class="text-center">Scoreboard</h4>
      <hr>
      <div class="well">
        <p>Longest +ve streak: N/A</p>
        <p>Longest -ve streak: N/A</p>
        <p>Highest Daily Xp: N/A</p>
        <p>Highest Goal Xp</p>
      </div>
    </div>
    <div class="col-md-8">
      <div class="row">
        <h4 class="text-center">Daily Breakdown</h4>
        <hr>
        <% if @goals.count > 0 %>
        <div class="col-md-4">
          <%# if current_user.user_xp_today > 0 %>
            <div class="daily-piechart">
              <%= pie_chart  @goals.map{ |goal| [goal.name, goal.daily_goal_xp] }, library: { chartArea: {left: 20, top: -500 , width: "300%", height: "300%"} } %>
            </div>
          <%# else %>
            <!--<p class="text-center no-xp-message">You haven't earned any XP today...</p>-->
          <%# end %>
        </div>
        <div class="col-md-8">
          <table class="table table-striped table-hover">
            <thead>
              <th><stong>Goal</stong></th>
              <!--<th><stong><%#= sort_link "xp" %></stong></th>-->
              <!--<th><stong><%#= sort_link "xp_today" %></stong></th>-->
              <th><stong>Actions</stong></th>
            </thead>
            <tbody>
              <% @goals.each do |goal| %>
              <tr>
                <td><%= link_to goal.name, goal_path(goal), class: "goal-title" %></td>
                <td><%= goal.xp_value %></td>
                <td><%= goal.daily_goal_xp %></td>
                <td>
                  <%= link_to edit_goal_path(goal), class: "btn btn-xs btn-default" do %>
                    <i class="fa fa-edit"></i>
                  <% end %>
                  <%= link_to goal_path(goal), method: :delete, data: {confirm: "Are you sure?"}, class: "btn btn-xs btn-danger" do %>
                    <i class="fa fa-trash-o"></i>
                  <% end %>
                </td>
              </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <% else %>
          <p class="text-center">You have no goals! Click <%= link_to "here", new_goal_path %> to create your first one.</p>
          </br>
          </br>        
        <% end %>
      </div>
      <div class="row">
        <h4 class="text-center">Overall Breakdown</h4>
        <hr>
        <% if @goals.count > 0 %>
        <div class="col-md-4">
          <% if current_user.total_user_xp > 0 %>
          <div class="overall-piechart">
            <%= pie_chart @goals.map{|goal| [goal.name, goal.total_goal_xp]}, library: { chartArea: {left: 20, top: -200, width: "100%", height: "100%"} } %>
          </div>
          <% else %>
            <p class="text-center no-xp-message">You haven't earned any XP yet...</p>
          <% end %>
        </div>
        <div class="col-md-8">
          <table class="table table-striped table-hover">
            <thead>
              <th><stong>Goal</stong></th>
              <!--<th><stong><%#= sort_link "xp" %></stong></th>-->
              <!--<th><stong><%#= sort_link "total_goal_xp" %></stong></th>-->
              <th><stong>Actions</stong></th>
            </thead>
            <tbody>
              <% @goals.each do |goal| %>
              <tr>
                <td><%= link_to goal.name, goal_path(goal), class: "goal-title" %></td>
                <td><%= goal.xp_value %></td>
                <td><%= goal.total_goal_xp %></td>
                <td>
                  <%= link_to edit_goal_path(goal), class: "btn btn-xs btn-default" do %>
                    <i class="fa fa-edit"></i>
                  <% end %>
                  <%= link_to goal_path(goal), method: :delete, data: {confirm: "Are you sure?"}, class: "btn btn-xs btn-danger" do %>
                    <i class="fa fa-trash-o"></i>
                  <% end %>
                </td>
              </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <% else %>
          <p class="text-center">You have no goals! Click <%= link_to "here", new_goal_path %> to create your first one.</p>
        <% end %>
      </div>
    </div>
  </div>
</div>